# ============================================
# SynthStack API Gateway Configuration
# ============================================

# ============================================
# FEATURE FLAGS (LITE vs PRO)
# ============================================
# SynthStack has two versions:
# - LITE (Community Edition): Core platform + basic chat/generation (no agents/RAG/referrals)
# - PRO (Commercial Edition): All features including agentic AI, RAG Copilot, and Referrals
#
# Recommended Community defaults:
#   ENABLE_COPILOT=true
#   ENABLE_AI_AGENTS=false
#   ENABLE_COPILOT_RAG=false
#   ENABLE_REFERRALS=false
# ============================================
ENABLE_COPILOT=true
ENABLE_AI_AGENTS=false
ENABLE_COPILOT_RAG=false
ENABLE_REFERRALS=false

# Server
NODE_ENV=development
PORT=3003
HOST=0.0.0.0
LOG_LEVEL=info

# CORS (comma-separated origins)
CORS_ORIGIN=http://localhost:3050,http://localhost:3003,http://localhost:8099

# ============================================
# Database (local Docker by default)
# ============================================
DATABASE_URL=postgresql://synthstack:change-this-password@localhost:5499/synthstack

# ============================================
# Redis (for rate limiting & caching)
# ============================================
REDIS_URL=redis://localhost:6399

# ============================================
# Directus CMS
# ============================================
DIRECTUS_URL=http://localhost:8099
DIRECTUS_TOKEN=your-directus-admin-token

# ============================================
# Supabase Auth (Default Authentication Provider)
# ============================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ============================================
# JWT (Required for local auth fallback)
# ============================================
JWT_SECRET=change-this-in-production

# ============================================
# BYOK Encryption (Required for storing user API keys)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# ============================================
ENCRYPTION_KEY=your-64-char-hex-key-here-generate-with-crypto-randomBytes-32

# ============================================
# Stripe Billing
# ============================================
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# SynthStack Lifetime License (One-time payment)
STRIPE_PRODUCT_LIFETIME=prod_xxxxxxxxxxxxx
STRIPE_PRICE_LIFETIME=price_xxxxxxxxxxxxxxxxxxxxx
# Optional promo code for marketing campaigns (passed as `promoCode` to /billing/checkout)
STRIPE_PROMO_EARLYCODE=EARLYCODE

# Monthly price IDs (for subscription tiers)
STRIPE_PRICE_MAKER=price_xxxxxxxxxxxxxxxxxxxxx
STRIPE_PRICE_PRO=price_xxxxxxxxxxxxxxxxxxxxx
STRIPE_PRICE_AGENCY=price_xxxxxxxxxxxxxxxxxxxxx

# Yearly price IDs (25% discount)
STRIPE_PRICE_MAKER_YEARLY=price_xxxxxxxxxxxxxxxxxxxxx
STRIPE_PRICE_PRO_YEARLY=price_xxxxxxxxxxxxxxxxxxxxx
STRIPE_PRICE_AGENCY_YEARLY=price_xxxxxxxxxxxxxxxxxxxxx

# ============================================
# AI Services
# ============================================
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...

# ============================================
# ML Service
# ============================================
ML_SERVICE_URL=http://localhost:8001

# ============================================
# Admin & Workers
# ============================================
ADMIN_SECRET=dev-admin-secret
CRON_SECRET=your-cron-secret

# ============================================
# Frontend URL (for redirects)
# ============================================
FRONTEND_URL=http://localhost:3050
APP_URL=http://localhost:3050

# ============================================
# Rate Limits (optional overrides)
# ============================================
# RATE_LIMIT_FREE=10
# RATE_LIMIT_MAKER=30
# RATE_LIMIT_PRO=60
# RATE_LIMIT_AGENCY=100

# ============================================
# Newsletter Providers
# ============================================
# Primary provider (mailerlite, mailchimp, or brevo)
NEWSLETTER_PROVIDER=mailerlite

# MailerLite
MAILERLITE_API_KEY=your-api-key
MAILERLITE_GROUP_ID=your-group-id
MAILERLITE_WEBHOOK_SECRET=your-webhook-secret

# Mailchimp
MAILCHIMP_API_KEY=your-api-key
MAILCHIMP_SERVER_PREFIX=us1
MAILCHIMP_LIST_ID=your-list-id

# Brevo (Sendinblue)
BREVO_API_KEY=your-api-key
BREVO_LIST_ID=1

# ============================================
# Email Service (Resend - Modern API)
# Get your API key from https://resend.com/api-keys
# ============================================
RESEND_API_KEY=re_your_api_key_here
RESEND_FROM_EMAIL=noreply@synthstack.app
RESEND_FROM_NAME=SynthStack

# ============================================
# Legacy SMTP (Optional - Resend recommended)
# ============================================
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-username
# SMTP_PASSWORD=your-password
# SMTP_FROM_EMAIL=noreply@synthstack.app
# SMTP_FROM_NAME=SynthStack
# SMTP_SECURE=false

# OpenRouter API Key (optional - for cost optimization)
OPENROUTER_API_KEY=

# ============================================
# SerpAPI (Web Search for AI Agents - PRO only)
# Get your API key from https://serpapi.com/manage-api-key
# ============================================
SERPAPI_KEY=
SERPAPI_MONTHLY_LIMIT=250

# LLM Router Configuration
LLM_USE_ROUTER=true
LLM_DEFAULT_TIER=standard
LLM_AUTO_ROUTE=true
LLM_CHEAP_MODEL=gpt-4o-mini
LLM_PREMIUM_MODEL=claude-3-opus-20240229

# ============================================
# Sentry Error Tracking (Optional)
# Get your DSN from https://sentry.io → Project Settings → Client Keys
# Create a Node.js project in Sentry for backend error tracking
# ============================================
# SENTRY_DSN=https://xxx@o123456.ingest.sentry.io/xxx
# SENTRY_ENVIRONMENT=development
# SENTRY_TRACES_SAMPLE_RATE=0.1
# SENTRY_PROFILES_SAMPLE_RATE=0.1
