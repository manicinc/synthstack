/**
 * SynthStack Global Styles
 * Maker Workshop Aesthetic - Retro-Futuristic Design
 */

// ============================================
// CSS Custom Properties (Design Tokens)
// ============================================

:root {
  // ============================================
  // APP SEMANTIC MAPPINGS
  // Maps application-specific variables to the dynamic Theme System variables
  // defined in the Theme Store (src/stores/theme.ts)
  // ============================================

  // Backgrounds
  --color-bg-primary: var(--bg-base);
  --color-bg-secondary: var(--bg-subtle);
  --color-bg-tertiary: var(--bg-muted);
  --color-bg-elevated: var(--bg-elevated);

  // Text
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-tertiary);
  --color-text-inverse: var(--bg-base); // Simple inversion strategy

  // Borders
  --color-border: var(--border-default);

  // Accent Colors
  --color-primary: var(--color-primary);
  --color-primary-hover: var(--color-primary-hover);
  --color-primary-active: var(--color-primary-hover); // Fallback
  --color-primary-muted: rgba(99, 102, 241, 0.15); // Hard fallback, should ideally be dynamic

  --color-secondary: var(--color-secondary);
  --color-secondary-hover: var(--color-secondary-hover);
  --color-secondary-active: var(--color-secondary-hover);
  --color-secondary-muted: rgba(20, 184, 166, 0.15);

  --color-tertiary: var(--color-accent);
  --color-tertiary-hover: var(--color-accent-hover);

  // Semantic Colors
  --color-success: var(--color-success);
  --color-success-bg: rgba(34, 197, 94, 0.1);
  --color-warning: var(--color-warning);
  --color-warning-bg: rgba(234, 179, 8, 0.1);
  --color-error: var(--color-error);
  --color-error-bg: rgba(239, 68, 68, 0.1);
  --color-info: var(--color-info);
  --color-info-bg: rgba(14, 165, 233, 0.1);

  // Typography - Mapped from Theme
  --font-display: var(--font-display, 'Plus Jakarta Sans', sans-serif);
  --font-body: var(--font-sans, 'Inter', sans-serif);
  --font-mono: var(--font-mono, 'JetBrains Mono', monospace);

  // Spacing (Keep existing definitions if they work, or map if needed)
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;
  --space-16: 4rem;
  --space-20: 5rem;
  --space-24: 6rem;

  // Border Radius
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);
  --radius-2xl: var(--radius-xl); // Fallback
  --radius-full: var(--radius-full);

  // Shadows
  --shadow-sm: var(--shadow-sm);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);
  --shadow-glow-primary: 0 0 20px rgba(99, 102, 241, 0.3);

  // Transitions
  --ease-default: var(--easing-default);
  --duration-fast: var(--transition-fast);
  --duration-normal: var(--transition-normal);
  --duration-slow: var(--transition-slow);
}

// Map --color-text-* to theme.scss variables AFTER theme import
// This section moved to after @import './theme.scss' below

// ============================================
// Base Styles
// ============================================

*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  font-size: 16px;
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  height: auto !important;
  min-height: 100% !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
}

body {
  font-family: var(--font-body);
  font-size: var(--text-md);
  line-height: 1.5;
  color: var(--color-text-primary);
  background-color: var(--color-bg-primary);
  margin: 0;
  padding: 0;
  height: auto !important;
  min-height: 100% !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
}

// CRITICAL: Fix Quasar layouts blocking scroll
.q-layout,
.q-page-container,
.q-page,
.q-drawer-container {
  height: auto !important;
  min-height: auto !important;
  overflow: visible !important;
}

// ============================================
// Typography
// ============================================

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-display);
  font-weight: 700;
  line-height: 1.2;
  margin: 0;
  color: var(--color-text-primary);
}

h1 {
  font-size: var(--text-5xl);
}

h2 {
  font-size: var(--text-4xl);
}

h3 {
  font-size: var(--text-3xl);
}

h4 {
  font-size: var(--text-2xl);
}

h5 {
  font-size: var(--text-xl);
}

h6 {
  font-size: var(--text-lg);
}

p {
  margin: 0 0 var(--space-4);
  color: var(--color-text-secondary);
}

a {
  color: var(--color-secondary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-default);

  &:hover {
    color: var(--color-secondary-hover);
  }
}

code,
pre {
  font-family: var(--font-mono);
  font-size: 0.9em;
}

code {
  background: var(--color-bg-tertiary);
  padding: 0.125em 0.375em;
  border-radius: var(--radius-sm);
}

pre {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-bg-elevated);
  border-radius: var(--radius-md);
  padding: var(--space-4);
  overflow-x: auto;

  code {
    background: none;
    padding: 0;
  }
}

// ============================================
// Layout Utilities
// ============================================

.container {
  width: 100%;
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 var(--space-6);
}

.container-narrow {
  max-width: 768px;
}

.container-wide {
  max-width: 1440px;
}

.section {
  padding: var(--space-16) 0;
}

.section-sm {
  padding: var(--space-10) 0;
}

.section-lg {
  padding: var(--space-24) 0;
}

// ============================================
// Grid Pattern Background
// ============================================

.bg-grid {
  background-image:
    linear-gradient(rgba(255, 107, 53, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 107, 53, 0.03) 1px, transparent 1px);
  background-size: 24px 24px;
}

.bg-grid-dense {
  background-image:
    linear-gradient(rgba(255, 107, 53, 0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 107, 53, 0.05) 1px, transparent 1px);
  background-size: 8px 8px;
}

// Layer Lines Pattern (3D printing aesthetic)
.bg-layers {
  background: repeating-linear-gradient(0deg,
      transparent,
      transparent 2px,
      rgba(255, 107, 53, 0.03) 2px,
      rgba(255, 107, 53, 0.03) 4px);
}

// ============================================
// Component Styles
// ============================================

// Cards
.card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-bg-elevated);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
  transition: all var(--duration-normal) var(--ease-default);

  &:hover {
    border-color: var(--color-bg-elevated);
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
  }
}

.card-elevated {
  box-shadow: var(--shadow-md);
}

// Buttons
.btn {
  font-family: var(--font-display);
  font-size: var(--text-sm);
  font-weight: 600;
  padding: var(--space-3) var(--space-6);
  border-radius: var(--radius-md);
  border: 2px solid transparent;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  transition: all var(--duration-fast) var(--ease-default);
  text-decoration: none;

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

.btn-primary {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);

  &:hover:not(:disabled) {
    background: var(--color-primary-hover);
    border-color: var(--color-primary-hover);
    transform: translateY(-1px);
    box-shadow: var(--shadow-glow-primary);
  }

  &:active:not(:disabled) {
    background: var(--color-primary-active);
    border-color: var(--color-primary-active);
    transform: translateY(0);
  }
}

.btn-secondary {
  background: transparent;
  color: var(--color-text-primary);
  border-color: var(--color-bg-elevated);

  &:hover:not(:disabled) {
    border-color: var(--color-primary);
    color: var(--color-primary);
  }
}

.btn-ghost {
  background: transparent;
  color: var(--color-text-secondary);
  border-color: transparent;

  &:hover:not(:disabled) {
    background: var(--color-bg-tertiary);
    color: var(--color-text-primary);
  }
}

.btn-lg {
  padding: var(--space-4) var(--space-8);
  font-size: var(--text-md);
}

.btn-sm {
  padding: var(--space-2) var(--space-4);
  font-size: var(--text-xs);
}

// Inputs
.input {
  font-family: var(--font-body);
  font-size: var(--text-md);
  background: var(--color-bg-tertiary);
  border: 2px solid var(--color-bg-elevated);
  border-radius: var(--radius-md);
  padding: var(--space-3) var(--space-4);
  color: var(--color-text-primary);
  width: 100%;
  transition: all var(--duration-fast) var(--ease-default);

  &::placeholder {
    color: var(--color-text-muted);
  }

  &:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px var(--color-primary-muted);
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

// Badges
.badge {
  font-family: var(--font-display);
  font-size: var(--text-xs);
  font-weight: 600;
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
}

.badge-primary {
  background: var(--color-primary-muted);
  color: var(--color-primary);
}

.badge-success {
  background: var(--color-success-bg);
  color: var(--color-success);
}

.badge-warning {
  background: var(--color-warning-bg);
  color: var(--color-warning);
}

.badge-error {
  background: var(--color-error-bg);
  color: var(--color-error);
}

// ============================================
// Animations
// ============================================

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes pulse {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.5;
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }

  100% {
    background-position: 200% 0;
  }
}

.animate-fade-in {
  animation: fadeIn var(--duration-normal) var(--ease-default);
}

.animate-fade-in-up {
  animation: fadeInUp var(--duration-normal) var(--ease-default);
}

.animate-scale-in {
  animation: scaleIn var(--duration-normal) var(--ease-default);
}

.animate-pulse {
  animation: pulse 2s var(--ease-default) infinite;
}

// ============================================
// Quasar Overrides
// ============================================

.q-card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-bg-elevated);
  border-radius: var(--radius-lg);
}

.q-btn {
  // Base typography
  font-family: var(--font-display);
  font-weight: 600;
  font-size: 0.875rem;
  letter-spacing: 0.01em;
  text-transform: none;

  // Neumorphic base
  border-radius: 12px;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;

  // Accessibility - proper touch targets
  min-height: 44px;
  min-width: 44px;

  // Enhanced focus states for accessibility
  &:focus-visible {
    outline: 3px solid var(--accent-primary, #0d9488);
    outline-offset: 3px;
  }

  // Primary button - futuristic gradient with glow
  &.bg-primary,
  &[class*="bg-primary"] {
    background: linear-gradient(135deg,
        var(--accent-primary, #0d9488) 0%,
        var(--accent-primary-hover, #14b8a6) 50%,
        var(--accent-secondary, #06b6d4) 100%) !important;
    background-size: 200% 200%;
    background-position: 0% 50%;
    color: #ffffff !important;
    box-shadow:
      0 4px 12px rgba(13, 148, 136, 0.35),
      0 2px 4px rgba(0, 0, 0, 0.1),
      inset 0 1px 1px rgba(255, 255, 255, 0.25),
      inset 0 -1px 1px rgba(0, 0, 0, 0.1);

    &:hover {
      background-position: 100% 50%;
      transform: translateY(-2px);
      box-shadow:
        0 8px 24px rgba(13, 148, 136, 0.45),
        0 4px 8px rgba(0, 0, 0, 0.15),
        inset 0 1px 2px rgba(255, 255, 255, 0.35);
    }

    &:active {
      transform: translateY(1px);
      box-shadow:
        0 2px 8px rgba(13, 148, 136, 0.3),
        inset 0 2px 4px rgba(0, 0, 0, 0.15);
    }

    // Shine effect on hover
    &::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg,
          transparent,
          rgba(255, 255, 255, 0.25),
          transparent);
      transition: left 0.5s ease;
      pointer-events: none;
    }

    &:hover::after {
      left: 100%;
    }
  }

  // Secondary/outline button
  &.q-btn--outline,
  &[class*="--outline"] {
    background: var(--surface-2, rgba(255, 255, 255, 0.05)) !important;
    border: 1.5px solid var(--border-default, rgba(255, 255, 255, 0.12)) !important;
    color: var(--text-primary, #fafafa) !important;
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);

    &:hover {
      border-color: var(--accent-primary, #0d9488) !important;
      color: var(--accent-primary, #0d9488) !important;
      background: var(--accent-primary-muted, rgba(13, 148, 136, 0.08)) !important;
      transform: translateY(-1px);
      box-shadow:
        0 4px 16px rgba(13, 148, 136, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
    }

    &:active {
      transform: translateY(0);
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }
  }

  // Flat/ghost button
  &.q-btn--flat {
    background: transparent;
    color: var(--text-secondary, #a1a1aa);

    &:hover {
      color: var(--text-primary, #fafafa);
      background: var(--surface-hover, rgba(255, 255, 255, 0.06));
    }

    &:active {
      background: var(--surface-active, rgba(255, 255, 255, 0.1));
    }
  }

  // Unelevated primary (standard Quasar primary)
  &.q-btn--unelevated {
    &.bg-primary {

      // Enhanced glow effect
      &::before {
        content: '';
        position: absolute;
        inset: -4px;
        border-radius: inherit;
        background: linear-gradient(135deg, var(--accent-primary, #0d9488), var(--accent-secondary, #06b6d4));
        filter: blur(16px);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
        pointer-events: none;
      }

      &:hover::before {
        opacity: 0.5;
      }
    }
  }

  // Disabled state
  &:disabled,
  &.disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }

  // Loading state
  &.q-btn--loading {
    pointer-events: none;
  }

  // Dense variant
  &.q-btn--dense {
    min-height: 36px;
    min-width: 36px;
    padding: 6px 12px;
  }

  // Round variant
  &.q-btn--round {
    border-radius: 50%;
  }
}

// Light mode button adjustments
.body--light .q-btn {

  &.q-btn--outline,
  &[class*="--outline"] {
    background: var(--surface-1, #ffffff) !important;
    border-color: var(--border-default, rgba(0, 0, 0, 0.12)) !important;
    color: var(--text-primary, #18181b) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);

    &:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    }
  }

  &.q-btn--flat {
    color: var(--text-secondary, #52525b);

    &:hover {
      color: var(--text-primary, #18181b);
      background: rgba(0, 0, 0, 0.04);
    }
  }
}

.q-input {
  .q-field__control {
    background: var(--color-bg-tertiary);
    border-radius: var(--radius-md);
  }
}

.q-toolbar {
  background: var(--color-bg-secondary);
}

.q-drawer {
  background: var(--color-bg-secondary);
}

// ============================================
// Responsive Utilities
// ============================================

@media (max-width: 768px) {
  :root {
    --text-5xl: 2.25rem;
    --text-4xl: 1.875rem;
    --text-3xl: 1.5rem;
  }

  .container {
    padding: 0 var(--space-4);
  }

  .section {
    padding: var(--space-10) 0;
  }

  .hide-mobile {
    display: none !important;
  }
}

@media (min-width: 769px) {
  .hide-desktop {
    display: none !important;
  }
}

// ============================================
// Mobile UI/UX Optimizations
// ============================================

// Touch-friendly tap targets (44px minimum)
@media (max-width: 1024px) {
  .q-btn {
    min-height: 44px;
    min-width: 44px;
  }

  .q-item {
    min-height: 48px;
  }

  // Better touch scrolling
  .q-scrollarea {
    -webkit-overflow-scrolling: touch;
  }

  // Prevent text selection on touch
  .no-select-touch {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }

  // Safe area insets for notched devices
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }

  // Prevent iOS Safari zoom on input focus (requires font-size >= 16px)
  input[type='text'],
  input[type='email'],
  input[type='password'],
  input[type='number'],
  input[type='tel'],
  input[type='url'],
  input[type='search'],
  textarea,
  select,
  .q-field__native {
    font-size: 16px !important;
    touch-action: manipulation;
  }

  // Disable double-tap zoom on interactive elements
  button,
  a,
  .q-btn,
  .q-item,
  .q-tab,
  .q-chip,
  [role='button'] {
    touch-action: manipulation;
  }
}

// Pull to refresh indicator styling
.pull-to-refresh {
  position: absolute;
  top: -50px;
  left: 50%;
  transform: translateX(-50%);
  transition: transform 0.2s ease;
}

// Bottom navigation for mobile
.mobile-bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--color-bg-secondary);
  border-top: 1px solid var(--color-bg-elevated);
  padding-bottom: env(safe-area-inset-bottom);
  z-index: 1000;
}

// Swipe gestures hint
.swipe-hint {
  position: relative;
  overflow: hidden;

  &::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 40px;
    background: linear-gradient(to left, var(--color-bg-secondary), transparent);
    pointer-events: none;
  }
}

// ============================================
// Skeleton Loading States
// ============================================

.skeleton {
  background: linear-gradient(90deg,
      var(--color-bg-tertiary) 25%,
      var(--color-bg-elevated) 50%,
      var(--color-bg-tertiary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: var(--radius-sm);
}

.skeleton-text {
  @extend .skeleton;
  height: 1em;
  margin-bottom: 0.5em;

  &.skeleton-title {
    height: 1.5em;
    width: 60%;
  }

  &.skeleton-short {
    width: 40%;
  }
}

.skeleton-avatar {
  @extend .skeleton;
  width: 48px;
  height: 48px;
  border-radius: 50%;
}

.skeleton-image {
  @extend .skeleton;
  width: 100%;
  aspect-ratio: 16/9;
}

.skeleton-card {
  @extend .skeleton;
  height: 200px;
  border-radius: var(--radius-lg);
}

// ============================================
// Focus & Accessibility Improvements
// ============================================

// Visible focus rings
*:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

// Skip link for keyboard navigation (accessibility)
// Hidden by default using clip-rect (screen reader accessible), visible only on focus/tab
.skip-link {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
  background: var(--color-primary, #6366f1);
  color: white;
  text-decoration: none;
  font-weight: 600;
  z-index: 99999;

  &:focus,
  &:focus-visible {
    position: absolute !important;
    width: auto !important;
    height: auto !important;
    padding: 12px 24px !important;
    margin: 0 !important;
    overflow: visible !important;
    clip: auto !important;
    white-space: normal !important;
    top: 8px;
    left: 8px;
    border-radius: 8px;
    outline: 3px solid white;
    outline-offset: 2px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  :root {
    --color-bg-primary: #000000;
    --color-bg-secondary: #111111;
    --color-text-primary: #ffffff;
    --color-primary: #ff8844;
  }
}

// Import additional styles
@import './theme.scss';
@import './animations.scss';
@import './responsive.scss';
@import './dashboard-components.scss';

// Map app color variables to theme variables (must come AFTER theme.scss)
:root,
.body--dark {
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-tertiary);
  // Map background variables (optional but ensures consistency)
  --color-bg-primary: var(--bg-base);
  --color-bg-secondary: var(--bg-subtle);
  --color-bg-tertiary: var(--bg-muted);
}

.body--light {
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-tertiary);
  // Map background variables for light mode
  --color-bg-primary: var(--bg-base);
  --color-bg-secondary: var(--bg-subtle);
  --color-bg-tertiary: var(--bg-muted);
}

// Import highlight.js theme for code syntax highlighting
// @import 'highlight.js/styles/github-dark.css'; // Temporarily disabled

// ============================================
// Light Mode Support
// Theme presets now control their own light/dark colors via CSS variables
// Only minimal overrides needed for Quasar framework compatibility
// ============================================

// Root element light mode
html.light {
  background-color: var(--bg-base, #FFFFFF) !important;
  color-scheme: light !important;
  color: var(--text-primary, #0F172A) !important;
}

body.body--light {
  // Force color-scheme for native form controls
  color-scheme: light;

  // Use theme variables - the theme store sets these via JavaScript
  background-color: var(--bg-base) !important;
  color: var(--text-primary) !important;

  // CRITICAL: Ensure body is always visible in light mode
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;
  clip-path: none !important;

  // All block-level text elements - use CSS variables
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: var(--text-primary) !important;
    -webkit-text-fill-color: var(--text-primary) !important;
  }

  // Body text elements
  p,
  li,
  label,
  td,
  th {
    color: var(--text-secondary) !important;
    -webkit-text-fill-color: var(--text-secondary) !important;
  }

  // Links - use secondary color or accent
  a:not([class*="btn"]):not([class*="gradient"]) {
    color: var(--color-secondary) !important;
  }

  // Buttons need special handling - ensure text is visible
  button:not(.q-btn--flat),
  .q-btn:not(.q-btn--flat) {
    -webkit-text-fill-color: currentColor !important;
  }

  // Flat/ghost buttons should have dark text
  button.q-btn--flat,
  .q-btn.q-btn--flat {
    color: var(--text-primary) !important;
    -webkit-text-fill-color: var(--text-primary) !important;
  }

  // Gradient text elements (light mode)
  // Avoid transparent-fill gradients in light mode (can flicker/invisibly repaint in Chrome).
  // Keep these as normal solid text so the landing page remains stable.
  .gradient-text,
  .gradient-word,
  .gradient-text-primary,
  .gradient-text-secondary,
  .gradient-text-animated,
  .text-gradient {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    -webkit-text-fill-color: currentColor !important;
    animation: none !important;
  }

  // AutonomousText text-layer - use solid color (handled in component CSS)
  .autonomous-text .text-layer,
  .text-layer:not(.gradient-word) {
    -webkit-text-fill-color: #0d9488 !important;
    color: #0d9488 !important;
    background: none !important;
  }

  // Colorized strong (tagline) should remain visible in light mode
  .colorized strong {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    -webkit-text-fill-color: currentColor !important;
    animation: none !important;
  }  // Landing page: disable backdrop-filter effects in light mode (can cause flicker in Chrome).
  .landing-page {
    .glass,
    .glass-subtle,
    .glass-strong,
    .card-glass-bg,
    .theming-badge,
    .more-features,
    .stats-row,
    .graph-stats,
    .node-label,
    .langgraph-badge,
    .panel-tab,
    .browser-frame,
    .browser-header,
    .feature-tag {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }
  }

  // Layouts and pages
  .q-layout,
  .q-page-container,
  .q-page {
    background: var(--bg-base) !important;
    color: var(--text-primary) !important;
  }

  // Sidebar
  .q-drawer,
  .app-sidebar {
    background: var(--bg-subtle);
  }

  // Cards and surfaces
  .q-card {
    background: var(--bg-elevated);
    border-color: var(--border-default);
  }

  // Inputs
  .q-field__control {
    background: var(--bg-base);
  }

  .q-field__native,
  .q-field__input {
    color: var(--text-primary);
  }

  // Landing page
  .landing-page {
    background: var(--bg-base) !important;
    color: var(--text-primary) !important;

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      color: var(--text-primary);
    }

    p {
      color: var(--text-secondary);
    }

    .section-badge {
      color: var(--color-primary);
      background: rgba(99, 102, 241, 0.1); // Dynamic fallback?
    }

    .feature-card,
    .pricing-card,
    .faq-item {
      background: var(--bg-elevated);
      border-color: var(--border-default);
    }

    .tag {
      color: var(--text-secondary);
      background: var(--bg-muted);
    }

    .faq-section {
      background: var(--bg-subtle);
    }
  }
}

// ============================================
// Electron macOS - Traffic Light Area
// ============================================

// Add padding for macOS traffic lights when in Electron
.platform-electron.is-desktop {

  // macOS specific - add space for traffic lights
  &.body--darwin,
  body[data-platform="darwin"] & {

    .q-header,
    .site-header {
      padding-top: 38px !important;
    }
  }
}

// Alternative: detect via CSS env if available
@supports (padding-top: env(titlebar-area-height)) {

  .platform-electron .q-header,
  .platform-electron .site-header {
    padding-top: env(titlebar-area-height, 38px);
  }
}

// Fallback for Electron on macOS - apply via body class
body.electron-mac {

  .q-header,
  .site-header,
  .q-layout__section--marginal {
    padding-top: 38px;
  }

  // Make header draggable for window movement
  .site-header {
    -webkit-app-region: drag;

    // Buttons should not be draggable
    button,
    a,
    input,
    .q-btn {
      -webkit-app-region: no-drag;
    }
  }
}

// ============================================
// Demo Credits Modal - Translucent Overlay
// ============================================

.translucent-modal {

  // Blurred backdrop
  .q-dialog__backdrop {
    backdrop-filter: blur(8px);
    background: rgba(0, 0, 0, 0.3) !important;
    transition: backdrop-filter 0.3s ease;
  }

  // Translucent card with glassmorphism effect
  .q-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  }
}

// Dark mode adjustments
body.body--dark {
  .translucent-modal {
    .q-dialog__backdrop {
      background: rgba(0, 0, 0, 0.5) !important;
    }

    .q-card {
      background: rgba(30, 30, 30, 0.95);
      border-color: rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }
  }
}

// Demo credits specific modal styling
.demo-credits-modal {
  .q-card {
    max-width: 450px;
    border-radius: var(--radius-lg, 12px);

    .q-card__section {
      padding: 24px;
    }

    // Title styling
    .q-dialog__title {
      font-size: var(--text-2xl, 1.5rem);
      font-weight: 600;
      margin-bottom: 12px;
    }

    // Message styling
    .q-dialog__message {
      font-size: var(--text-md, 1rem);
      line-height: 1.6;
      color: var(--color-text-secondary);
    }

    // Button styling
    .q-btn {
      min-width: 120px;
      padding: 10px 20px;
      border-radius: var(--radius-md, 8px);
      font-weight: 500;
    }
  }
}